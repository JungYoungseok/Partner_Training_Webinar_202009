{"title":"[Narbais][KB] Cost/Usage Metrics","description":"## Title\n\nDescribe this dashboard. Add links to other dashboards, monitors, wikis,  and docs to help your teammates. Markdown is supported.\n\n- [This might link to a dashboard](#)\n- [This might link to a wiki](#)\n\nUsage metric","widgets":[{"id":864007799757150,"definition":{"type":"group","layout_type":"ordered","widgets":[{"id":6185801625754300,"definition":{"type":"note","content":"# Billing\n\nThis is Timeboard is supposed to be seen with 2 or 4 columns.\n\nTo get started: [Documentation](https://docs.datadoghq.com/account_management/billing)\n\nThis dashboard provides an overview of the metrics that are highly correlated to the actual billing. They are not 100% correlate to billing and should be used only as a proxy to identify the biggest trends.\n\nThose metrics can also be used to identify the biggest consumers with a selected tag.","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":6173725482753466,"definition":{"type":"note","content":"# Disclaimer\n\nAll the information provided here have been copied from the doc at a specific date and are here for indications. They are subject to changes, please refer to the link provided for official information.","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":7256441856795294,"definition":{"type":"note","content":"## Usage\n\nUsage is reported into the platform on a daily basis.\n\n[Usage page](/account/usage)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":3253597055718230,"definition":{"type":"note","content":"## Multi-org usage\n\nTo get your multi-org usage programmatically, you can use [this endpoint](https://docs.datadoghq.com/api/v1/usage-metering/#get-usage-across-your-multi-org-account). You can also build a script to query the endpoint, submit the results as Datadog metrics and build a consumption dashboard. Ask Datadog for the \"Usage Viewer\" script to get started.","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}}],"title":"Intro"}},{"id":6336322539375988,"definition":{"type":"group","layout_type":"ordered","widgets":[{"id":4098457262090794,"definition":{"type":"note","content":"## Host billing (doc)\n\n> A host is a physical or virtual operating system instance. Each hour, Datadog records the number of unique hosts you are monitoring in the Infrastructure service.\n\n> - On a high watermark plan (HWMP), these hourly measurements are ordered from highest to lowest at the end of the month, and Datadog charges based on the eighth highest measurement.\n\n> - On a hybrid monthly/hourly plan (MHP), Datadog charges your minimum monthly commitment, and for any host hours above that commitment, Datadog charges an hourly rate.\n\n[Documentation](https://docs.datadoghq.com/account_management/billing/pricing/)\n\n> \"Hosts are defined as any instances with the Datadog Agent installed plus any AWS EC2s, GCP, Azure, or vSphere VMs monitored with our integrations. Any EC2s or VMs with the Agent installed count as a single instance (no double-billing).\n\n> Non-reporting hosts (status ??? in your Infrastructure list) do not count towards billing. It could take up to 2 hours for these hosts to drop out of the Infrastructure List. Datadog retains the historical data for these hosts (paid accounts). Metrics can be graphed on a dashboard by knowing the specific host name or tags.\"\n\n[Documentation](https://docs.datadoghq.com/account_management/billing)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":6430455417879524,"definition":{"type":"note","content":"## Host billing\n\n**Note**: By default the hosts in AWS, Azure or GCP that do not have an agent are still monitored.\n\n**Best practice**: It is advised to install an agent for more granularity and to be able to add additional integrations.\n\n**Note**: In your widgets, make sure to count every hosts only once. *An example has been given for reference*","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":4034618304882646,"definition":{"type":"note","content":"Metric provided by Datadog to **estimate** usage\n\n[Documentation](https://docs.datadoghq.com/account_management/billing/usage_metrics/)\n\n**Note**: \"These usage metrics are estimates that wonâ€™t always match up to billable usage given their real-time nature. There is a 10-20% difference between estimated usage and billable usage on average.\"","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":3641214649754306,"definition":{"type":"timeseries","requests":[{"q":"avg:datadog.estimated_usage.hosts{*}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"month_before(avg:datadog.estimated_usage.hosts{*})","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"datadog.estimated_usage.hosts, datadog.estimated_usage.hosts","show_legend":false,"legend_size":"0"}},{"id":5827369706332402,"definition":{"type":"note","content":"For each agent `datadog.agent.running`: Shows a value of 1 if the Agent is currently reporting to Datadog.","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":8460798890700718,"definition":{"type":"timeseries","requests":[{"q":"sum:datadog.agent.running{$scope}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"month_before(sum:datadog.agent.running{$scope})","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Sum of datadog.agent.running over *","show_legend":false,"legend_size":"0"}},{"id":7417431104984292,"definition":{"type":"note","content":"For each EC2 instance monitored `aws.ec2.host_ok`: 1 if the instance's system status is ok.\n","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":6579430463525446,"definition":{"type":"timeseries","requests":[{"q":"sum:aws.ec2.host_ok{$scope}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"month_before(sum:aws.ec2.host_ok{$scope})","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Sum of aws.ec2.host_ok over *","show_legend":false,"legend_size":"0"}},{"id":610814752273378,"definition":{"type":"note","content":"For each Azure VM instance monitored `azure.vm.count`: Status of Azure VM. This metric is tagged with status:running, status:not_running, or status:unknown.\n\nOnly select status:running and status:unknown\n\nIf you destroy your Azure VM, it phases out of your infrastructure list within 3 hours.\n\n[Billing](https://docs.datadoghq.com/integrations/faq/azure-status-metric/)\n\n[Metric description](https://docs.datadoghq.com/integrations/faq/azure-status-metric/)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":3773703768140466,"definition":{"type":"timeseries","requests":[{"q":"sum:azure.vm.count{$scope} by {status}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Sum of azure.vm.status over * by status","show_legend":false,"legend_size":"0"}},{"id":3945824219513590,"definition":{"type":"note","content":"Azure App Services underlying resources\n\nLook for status:running only","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":8482514940506176,"definition":{"type":"timeseries","requests":[{"q":"sum:azure.web_serverfarms.current_instance_count{$scope} by {status}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"month_before(sum:azure.web_serverfarms.current_instance_count{$scope} by {status})","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"azure.web_serverfarms.current_instance_count, azure.web_serverfarms.current_i...","show_legend":false,"legend_size":"0"}},{"id":3849924055982070,"definition":{"type":"note","content":"Example: total monitored hosts (with relevant exclusions)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":158082236519380,"definition":{"type":"timeseries","requests":[{"q":"sum:datadog.agent.running{$scope,!cloud_provider:aws,!cloud_provider:azure}+sum:aws.ec2.host_ok{$scope}+sum:azure.vm.count{$scope,status:running}+sum:azure.web_serverfarms.current_instance_count{$scope,status:running}+sum:azure.vm.count{$scope,status:unknown}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Sum of host monitored over AWS, Azure and OnPrem","show_legend":false,"legend_size":"0"}},{"id":8028212674358626,"definition":{"type":"note","content":"Example: total monitored hosts (with relevant exclusions)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":3082001358517990,"definition":{"type":"timeseries","requests":[{"q":"sum:datadog.agent.running{$scope,!cloud_provider:aws,!cloud_provider:azure}, sum:aws.ec2.host_ok{$scope}, sum:azure.vm.count{$scope,status:running}, sum:azure.web_serverfarms.current_instance_count{$scope,status:running}, sum:azure.vm.count{$scope,status:unknown}","display_type":"bars","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Sum of host monitored over AWS, Azure and OnPrem","show_legend":false,"legend_size":"0"}}],"title":"Host"}},{"id":5667698506383132,"definition":{"type":"group","layout_type":"ordered","widgets":[{"id":2720050614596060,"definition":{"type":"note","content":"## Container Billing (doc)\n\n> A container is a self-contained operating environment that includes application software and limited operating system libraries and settings. Once every five minutes, Datadog records the number of unique containers you are monitoring in the Datadog Infrastructure service. Datadog charges monthly based on the fractional hours of monitored containers.\n\n[Documentation](https://docs.datadoghq.com/account_management/billing/pricing/)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":7644300556561340,"definition":{"type":"note","content":"## Container Billing\n\n**Note**: Depending on your contract, a container quota is available based on the number of hosts.\n\n> \"The Datadog Agent runs in a container alongside any number of other containers on a host. From there it can collect metrics from its neighboring containers and from the host itself. Depending on your plan, you can monitor 10 or 20 containers free for each host license.\n\n> Additional containers will be billed at $0.002 per container per hour. In addition, you can purchase prepaid containers at $1 per container per month.\"\n\n[Pricing page](https://www.datadoghq.com/pricing/#section-cq)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":2326667934391492,"definition":{"type":"note","content":"Metric provided by Datadog to **estimate** usage\n\n[Documentation](https://docs.datadoghq.com/account_management/billing/usage_metrics/)\n\n**Note**: \"These usage metrics are estimates that wonâ€™t always match up to billable usage given their real-time nature. There is a 10-20% difference between estimated usage and billable usage on average.\"","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":3231696058721700,"definition":{"type":"timeseries","requests":[{"q":"avg:datadog.estimated_usage.containers{*}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"month_before(avg:datadog.estimated_usage.containers{*})","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Avg of datadog.estimated_usage.containers over *","show_legend":false,"legend_size":"0"}},{"id":578447483907858,"definition":{"type":"note","content":"For each agent `datadog.containers.running.total`: The total number of containers running on this host\n\n**Note**: The docker.containers.running, .stopped, .running.total and .stopped.total metrics are not affected by these settings: ac_include, ac_exclude, etc.. All containers are counted. This does not affect your per-container billing.","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":1569027276292468,"definition":{"type":"timeseries","requests":[{"q":"sum:docker.containers.running.total{$scope}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"month_before(sum:docker.containers.running.total{$scope})","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"docker.containers.running.total, docker.containers.running.total","show_legend":false,"legend_size":"0"}},{"id":2214800573107452,"definition":{"type":"note","content":"From the note above, a more relevant query would be: `count_not_null(sum:docker.cpu.system{*} by {container_id})`\n\n**Note:** This metric is accurate on a short time periods. On larger time period selected it starts to diverge from the actual value. This is due to the fact that `count_not_null` is applied at the end. There is a first a time aggregation where we collect the list of all containers and then we apply the count_not_null function.\n\n**Note:** This metric is extremely inaccurate on a large scale when the containers are restarting often.","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":8883099665365424,"definition":{"type":"timeseries","requests":[{"q":"count_not_null(avg:docker.cpu.system{$scope} by {container_id})","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"month_before(count_not_null(avg:docker.cpu.system{$scope} by {container_id}))","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Avg of docker.cpu.system over * by container_id","show_legend":false,"legend_size":"0"}},{"id":8682725064487730,"definition":{"type":"note","content":"Fargate has a different pricing model than a container.\n\nFor each container `ecs.fargate.cpu.system`: Total CPU time consumed by the system\n\n> An AWS Fargate task is a collection of containers setup through AWSâ€™s ECS container orchestration platform. Datadog records the number of task instances you are monitoring in the Datadog Infrastructure (or APM) service at five-minute intervals. Datadog aggregates the interval-based measurements at the end of the month and charges you based on the total number of hours your applications were run and monitored.\n\n[Documentation](https://docs.datadoghq.com/account_management/billing/pricing/)\n\n**Note:** This metric is extremely inaccurate on a large scale when the containers are restarting often.","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":4186743409877276,"definition":{"type":"timeseries","requests":[{"q":"count_not_null(count:ecs.fargate.cpu.system{$scope} by {task_arn,ecs_task_family})","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"month_before(count_not_null(count:ecs.fargate.cpu.system{$scope} by {task_arn,ecs_task_family}))","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Count of ecs.fargate.cpu.system over * by task_arn,ecs_task_family","show_legend":false,"legend_size":"0"}},{"id":846186177836442,"definition":{"type":"note","content":"Suggested estimation split by `service` and `team`","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":5065376956252488,"definition":{"type":"toplist","requests":[{"q":"top(sum:docker.containers.running.total{$scope} by {service,team}, 10, 'mean', 'desc')"}],"title":"Sum of docker.containers.running.total over * by service,team"}}],"title":"Containers / Fargate"}},{"id":6895545892039520,"definition":{"type":"group","layout_type":"ordered","widgets":[{"id":829782108405052,"definition":{"type":"note","content":"## APM Billing (doc)\n\n> Datadog records the number of unique APM hosts you are monitoring in the Datadog APM service each hour.\nOn a high watermark plan (HWMP), these hourly measurements are ordered from highest to lowest at the end of the month, and Datadog charges based on the eighth highest measurement.\nOn a hybrid monthly/hourly plan (MHP), Datadog charges your minimum monthly commitment, and for any host hours above that commitment, Datadog charges an hourly rate.\n\n> An Analyzed Span is an individual request against an individual service in your stack. Datadog charges based on the total number of Analyzed Spans submitted to the Datadog APM service.\n\n[Documentation](https://docs.datadoghq.com/account_management/billing/pricing/#apm)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":475638029622996,"definition":{"type":"note","content":"## APM Billing","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":4954022502143584,"definition":{"type":"note","content":"For each agent `datadog.apm.host_instance`: ...\n","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":1044674776045862,"definition":{"type":"timeseries","requests":[{"q":"sum:datadog.apm.host_instance{$scope}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"on_right_yaxis":false},{"q":"month_before(sum:datadog.apm.host_instance{$scope})","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Sum of datadog.apm.host_instance over *","show_legend":false,"legend_size":"0"}},{"id":1446460247235316,"definition":{"type":"note","content":"Suggested estimation split by `service` and `team`","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":1621389383809128,"definition":{"type":"toplist","requests":[{"q":"top(sum:datadog.apm.host_instance{$scope} by {service,team}, 10, 'max', 'desc')"}],"title":"Sum of datadog.apm.host_instance over * by service,team"}}],"title":"APM"}},{"id":6840260121003338,"definition":{"type":"group","layout_type":"ordered","widgets":[{"id":7446985652506758,"definition":{"type":"note","content":"## Custom Metrics (doc)\n\n> A custom metric is a single, unique combination of a metric name, host ID and any tags. Datadog charges based on the monthly average of unique custom metrics submitted to the Datadog Infrastructure service per hour.\n\n[Documentation](https://docs.datadoghq.com/account_management/billing/pricing/)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":2329460369025108,"definition":{"type":"note","content":"## Custom Metric Billing\n\n**Note**: To identify the biggest contributors to your custom metric count, check the bottom of your [usage page](https://app.datadoghq.com/account/usage#billing_avg_metrics).","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":8893369587612314,"definition":{"type":"note","content":"Metric provided by Datadog to **estimate** usage\n\n[Documentation](https://docs.datadoghq.com/account_management/billing/usage_metrics/)\n\n**Note**: \"These usage metrics are estimates that wonâ€™t always match up to billable usage given their real-time nature. There is a 10-20% difference between estimated usage and billable usage on average.\"","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":1894876240762308,"definition":{"type":"timeseries","requests":[{"q":"avg:datadog.estimated_usage.metrics.custom{*}","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Avg of datadog.estimated_usage.metrics.custom over *","show_legend":false,"legend_size":"0"}},{"id":1492562622464960,"definition":{"type":"note","content":"For one specific metric name here: `my_metric`, split by all the tags available to get the cardinality of the metric.","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":7319105845022534,"definition":{"type":"timeseries","requests":[{"q":"count_not_null(avg:my_metric{$scope} by {env,host,team,service})","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Avg of my_metric over * by env,host,team,service","show_legend":false,"legend_size":"0"}}],"title":"Custom Metrics"}},{"id":4176967401034578,"definition":{"type":"group","layout_type":"ordered","widgets":[{"id":7386163951314702,"definition":{"type":"note","content":"## Cloud Function Billing (doc)\n\n> A cloud function is application code setup to execute on a cloud platformâ€™s serverless compute service in response to defined events or actions (for example, AWS Lambda, Google Cloud Function, and Azure Function). The Datadog Infrastructure service records the number of functions executed or invoked one or more times each hour. Datadog charges based on the average number of functions across all hours in a month.\n\n[Documentation](https://docs.datadoghq.com/account_management/billing/pricing/)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":1975742680467468,"definition":{"type":"note","content":"## Cloud Function Billing","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":2717426941810790,"definition":{"type":"note","content":"For each lambda `aws.lambda.invocations`: Measures the number of times a function is invoked in response to an event or invocation API call.\n\nNote: We will need to get the `count_not_null` of the metric split by multiple lambda tags.","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":8686188770056386,"definition":{"type":"timeseries","requests":[{"q":"count_not_null(avg:aws.lambda.invocations{$scope} by {functionname,aws_account,region}.as_count().rollup(avg, 3600))","display_type":"bars","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Avg of aws.lambda.invocations over * by functionname,aws_account,region","show_legend":false,"legend_size":"0"}}],"title":"Lambda / Cloud Functions"}},{"id":2493924391896584,"definition":{"type":"group","layout_type":"ordered","widgets":[{"id":5963042434587140,"definition":{"type":"note","content":"## Synthetics Billing (doc)\n\n> An API test is an HTTP or HTTPS request against a single URL. Datadog charges per ten thousand API tests runs executed to the Datadog Synthetics service.\n\n> A browser test is a simulation of a scripted sequence of user actions on a web-based application using a virtualized web browser. Datadog charges per thousand browser tests executed to the Datadog Synthetics service.\n\n[Documentation](https://docs.datadoghq.com/account_management/billing/pricing/#log-management)","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":2077001134448936,"definition":{"type":"note","content":"## Synthetic Billing","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":6247714773705278,"definition":{"type":"note","content":"`synthetics.api.response`: The count of API responses we receive.\n","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":3845748563657108,"definition":{"type":"toplist","requests":[{"q":"top(sum:synthetics.api.response{$scope} by {env,service}.rollup(sum), 10, 'sum', 'desc')"}],"title":"Sum of synthetics.api.response over * by env,service"}},{"id":1062607712587508,"definition":{"type":"note","content":"`synthetics.http.response`: The count of HTTP responses we receive.\n","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":7795750940383708,"definition":{"type":"toplist","requests":[{"q":"top(avg:synthetics.http.response{$scope} by {env,service}.as_count().rollup(sum), 10, 'sum', 'desc')"}],"title":"Avg of synthetics.http.response over * by env,service"}},{"id":829109996082490,"definition":{"type":"note","content":"`synthetics.browser.test_duration`: The test execution time.\n\nNote: We will need to get the `count_not_null` from this metric by `check_id`. This does not take into consideration tests above 40 steps.","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":7967395219570312,"definition":{"type":"timeseries","requests":[{"q":"count_not_null(avg:synthetics.browser.test_duration{$scope} by {check_id})","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}},{"q":"month_before(count_not_null(avg:synthetics.browser.test_duration{$scope} by {check_id}))","display_type":"line","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"on_right_yaxis":false}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Avg of synthetics.browser.test_duration over * by check_id","show_legend":false,"legend_size":"0"}}],"title":"Synthetics"}},{"id":1005363525028372,"definition":{"type":"group","layout_type":"ordered","widgets":[{"id":8106216107748454,"definition":{"type":"note","content":"## Log Billing (doc)\n\n> A log is a text-based record of activity generated by an operating system, an application, or by other sources. Datadog charges for ingested logs based on the total number of gigabytes submitted to the Datadog Logs service.\n\n> A log event is a log that is indexed by the Datadog Logs service. Datadog charges per million log events submitted for indexing at the rate designated for the retention policy you selected.\n\n[Documentation](https://docs.datadoghq.com/account_management/billing/pricing/#log-management)\n\n","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":5893226964761618,"definition":{"type":"note","content":"## Log Billing\n\nEnable the metrics available there: https://app.datadoghq.com/logs/pipelines/generate-metrics\n\nCheck the documentation here for more details: https://docs.datadoghq.com/logs/guide/logs-monitors-on-volumes/","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":4360069574536570,"definition":{"type":"timeseries","requests":[{"q":"cumsum(sum:datadog.estimated_usage.logs.ingested_bytes{$scope} by {service,datadog_index})","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Sum of datadog.estimated_usage.logs.ingested_bytes over * by service,datadog_...","show_legend":false,"legend_size":"0"}},{"id":2368570545067250,"definition":{"type":"timeseries","requests":[{"q":"cumsum(sum:datadog.estimated_usage.logs.ingested_events{datadog_is_excluded:false,$scope} by {service,datadog_index}.as_count())","display_type":"line","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"}}],"yaxis":{"label":"","scale":"linear","min":"auto","max":"auto","include_zero":true},"title":"Sum of datadog.estimated_usage.logs.ingested_events over datadog_is_excluded:...","show_legend":false,"legend_size":"0"}},{"id":2673774215432774,"definition":{"type":"toplist","requests":[{"q":"top(sum:datadog.estimated_usage.logs.ingested_bytes{$scope} by {service,datadog_index}.rollup(sum), 10, 'sum', 'desc')"}],"title":"Sum of datadog.estimated_usage.logs.ingested_bytes over * by service,datadog_..."}},{"id":6186406013030564,"definition":{"type":"toplist","requests":[{"q":"top(sum:datadog.estimated_usage.logs.ingested_events{datadog_is_excluded:false,$scope} by {datadog_index,service}.as_count().rollup(sum), 10, 'sum', 'desc')"}],"title":"Sum of datadog.estimated_usage.logs.ingested_events over datadog_is_excluded:..."}}],"title":"Logs"}}],"template_variables":[{"name":"scope","default":"*","prefix":null}],"layout_type":"ordered","is_read_only":false,"notify_list":[],"id":"mvj-5am-k8e"}