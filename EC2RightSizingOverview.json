{"title":"[Jacky] EC2 Right Sizing Overview (cloned)","description":"https://docs.aws.amazon.com/whitepapers/latest/cost-optimization-right-sizing/tips-for-right-sizing-your-workloads.html\n\nAnalyze performance data to right size your EC2 instances. Identify idle instances and ones that are underutilized. Key metrics to look for are CPU usage and memory usage. Identify instances with a maximum CPU usage and memory usage of less than 40% over a four-week period. These are the instances that you will want to right size to reduce costs.","widgets":[{"id":0,"definition":{"type":"query_table","requests":[{"q":"max:aws.ec2.cpuutilization.maximum{$instance-type,$team,aws_account:727006795293} by {host}","aggregator":"max","limit":25,"order":"asc","alias":"max cpu","conditional_formats":[{"comparator":"<","value":40,"palette":"white_on_red"},{"comparator":"<","value":60,"palette":"white_on_yellow"}]}],"custom_links":[],"title":"Guideline: Maximum CPU usage < 40%","title_size":"16","title_align":"left"},"layout":{"x":65,"y":14,"width":36,"height":77}},{"id":1,"definition":{"type":"note","content":"Dashboard developed using [AWS recommendations](https://docs.aws.amazon.com/whitepapers/latest/cost-optimization-right-sizing/tips-for-right-sizing-your-workloads.html) for right sizing against CPU and Memory for EC2 instances.  There are many factors to consider when right sizing instances.  Read and understand [AWS tips for right sizing](https://docs.aws.amazon.com/whitepapers/latest/cost-optimization-right-sizing/tips-for-right-sizing-your-workloads.html).  ","background_color":"orange","font_size":"14","text_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"bottom"},"layout":{"x":28,"y":0,"width":36,"height":11}},{"id":3,"definition":{"type":"query_table","requests":[{"q":"max:aws.ec2.cpuutilization.maximum{$instance-type,$team,aws_account:727006795293} by {host,team}","aggregator":"max","alias":"max cpu","conditional_formats":[{"comparator":"<","value":40,"palette":"white_on_red","custom_bg_color":"#cc2a2a","custom_fg_color":"#d56f6f"},{"comparator":"<","value":60,"palette":"white_on_yellow"},{"comparator":">=","value":60,"palette":"white_on_green"}]},{"q":"min:system.mem.pct_usable{$instance-type,$team,aws_account:727006795293} by {host,team}","aggregator":"min","limit":25,"order":"desc","alias":"min usable memory","conditional_formats":[{"comparator":">","value":0.6,"palette":"white_on_red"},{"comparator":">","value":0.4,"palette":"white_on_yellow"},{"comparator":"<=","value":0.4,"palette":"white_on_green"}]}],"custom_links":[],"title":"Underutilized Instances by both CPU and Memory (Top 25)","title_size":"16","title_align":"left"},"layout":{"x":0,"y":12,"width":64,"height":79}},{"id":5,"definition":{"type":"query_table","requests":[{"q":"min:system.mem.pct_usable{$instance-type,$team,aws_account:727006795293} by {host}","aggregator":"min","limit":25,"order":"desc","alias":"min usable memory","conditional_formats":[{"comparator":">","value":0.6,"palette":"white_on_red"},{"comparator":">","value":0.4,"palette":"white_on_yellow"}]}],"custom_links":[],"title":"Guideline: Maximum memory usage < 0.4","title_size":"16","title_align":"left"},"layout":{"x":102,"y":14,"width":35,"height":77}},{"id":6,"definition":{"type":"image","url":"https://datadog-docs.imgix.net/images/integrations_logos/amazon_ec2.png","sizing":"fit"},"layout":{"x":0,"y":0,"width":11,"height":11}},{"id":7,"definition":{"type":"query_value","requests":[{"q":"sum:aws.ec2.host_ok{$team,$instance-type}","aggregator":"last"}],"custom_links":[],"title":"EC2 Instances","title_size":"16","title_align":"left","precision":0},"layout":{"x":11,"y":0,"width":17,"height":11}},{"id":15,"definition":{"type":"note","content":"**Note:**\n\nAccelerated Compute instances (P2, P3, G2, G3, G4, F1, Inf1) are not included in underutilization metrics. GPU instances (P2, P3, G2, G3, G4) require additional plugins via [AWS CloudWatch](https://aws.amazon.com/blogs/machine-learning/monitoring-gpu-utilization-with-amazon-cloudwatch/) or [Datadog NVML](https://github.com/ngi644/datadog_nvml).\n\nPricing metrics to not account for CPU Credits as applied to burstable (t2, t3, t3a) instances.","background_color":"white","font_size":"14","text_align":"left","show_tick":false,"tick_pos":"50%","tick_edge":"left"},"layout":{"x":65,"y":0,"width":72,"height":11}}],"template_variables":[{"name":"instance-type","default":"*","prefix":"instance-type"},{"name":"team","default":"*","prefix":"team"}],"layout_type":"free","is_read_only":false,"notify_list":[],"id":"xzp-e4t-qrg"}